<f:layout name="Default" />
<f:section name="Main">
  <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="width:100%;">
    <tr>
      <td style="font-family:Arial, Helvetica, sans-serif; font-size:16px; line-height:1.6; color:#333333;">
        <f:render partial="Header" arguments="{data:data}" />

        <f:if condition="{gallery.count.files}">
          <f:switch expression="{gallery.position.vertical}">
            <!-- Image in text (left/right) -->
            <f:case value="intext">
              <table role="presentation" width="100%" cellpadding="0" cellspacing="0" border="0" style="width:100%;">
                <tr>
                  <f:if condition="{gallery.position.horizontal} == 'left'">
                    <f:then>
                      <td valign="top" width="{gallery.width}" style="padding:0 12px 10px 0;">
                        <f:render partial="Media/Gallery" arguments="{gallery: gallery}" />
                      </td>
                      <td valign="top" style="padding:0 0 10px 0;">
                        <f:if condition="{data.bodytext}">
                          <f:format.html parseFuncTSPath="lib.parseFunc_RTE">{data.bodytext}</f:format.html>
                        </f:if>
                      </td>
                    </f:then>
                    <f:else>
                      <td valign="top" style="padding:0 0 10px 0;">
                        <f:if condition="{data.bodytext}">
                          <f:format.html parseFuncTSPath="lib.parseFunc_RTE">{data.bodytext}</f:format.html>
                        </f:if>
                      </td>
                      <td valign="top" width="{gallery.width}" style="padding:0 0 10px 12px;">
                        <f:render partial="Media/Gallery" arguments="{gallery: gallery}" />
                      </td>
                    </f:else>
                  </f:if>
                </tr>
              </table>
            </f:case>

            <!-- Images below text -->
            <f:case value="below">
              <f:if condition="{data.bodytext}">
                <f:format.html parseFuncTSPath="lib.parseFunc_RTE">{data.bodytext}</f:format.html>
              </f:if>
              <f:render partial="Media/Gallery" arguments="{gallery: gallery}" />
            </f:case>

            <!-- Default: images above text -->
            <f:defaultCase>
              <f:render partial="Media/Gallery" arguments="{gallery: gallery}" />
              <f:if condition="{data.bodytext}">
                <f:format.html parseFuncTSPath="lib.parseFunc_RTE">{data.bodytext}</f:format.html>
              </f:if>
            </f:defaultCase>
          </f:switch>
        </f:if>

        <f:if condition="{gallery.count.files} == 0">
          <f:if condition="{data.bodytext}">
            <f:format.html parseFuncTSPath="lib.parseFunc_RTE">{data.bodytext}</f:format.html>
          </f:if>
        </f:if>

      </td>
    </tr>
  </table>
</f:section>
